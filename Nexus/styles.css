:root{
  --primary:#00eaff; --accent:#8a2be2; --text:#e6f7ff; --muted:#9fb3c8;
  --space-img:url("https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&w=1920&auto=format&fit=crop");
  --bg-a:#05060d; --bg-b:#0b1430; --bg-c:#00182a;
  --glow: drop-shadow(0 0 8px rgba(0,234,255,.55)) drop-shadow(0 0 18px rgba(138,43,226,.35));
  --ring: 0 0 0 3px rgba(0,234,255,.35), 0 0 24px rgba(0,234,255,.25);
  --grid:rgba(255,255,255,.12);
  --danger:#ff4d4f; --ok:#16a34a; --warn:#f59e0b;
  --card-bg: rgba(8,12,28,.55);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--text);
  font-family:Outfit, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  background:
    radial-gradient(1200px 800px at 75% 10%, rgba(138,43,226,.18), transparent 60%),
    radial-gradient(900px 700px at 15% 85%, rgba(0,234,255,.12), transparent 55%),
    radial-gradient(700px 500px at 80% 80%, rgba(0,40,80,.35), transparent 60%),
    linear-gradient(120deg, var(--bg-a), var(--bg-b) 40%, var(--bg-c));
  overflow-x:hidden;
}
body::before{
  content:""; position:fixed; inset:0; pointer-events:none; mix-blend-mode:screen; opacity:.15; z-index:-1;
  background:
    var(--space-img) center/cover no-repeat,
    radial-gradient(1px 1px at 10% 20%, #fff 40%, transparent 41%),
    radial-gradient(1px 1px at 30% 80%, #fff 40%, transparent 41%),
    radial-gradient(1px 1px at 70% 30%, #fff 40%, transparent 41%),
    radial-gradient(1px 1px at 90% 60%, #fff 40%, transparent 41%);
  animation: twinkle 14s linear infinite;
}
@keyframes twinkle{0%,100%{opacity:.12}50%{opacity:.22}}
body::after{content:""; position:fixed; inset:-10%; pointer-events:none; z-index:-1; filter:blur(24px);
  background: radial-gradient(600px 320px at 50% 25%, rgba(0,234,255,.18), transparent 60%),
              radial-gradient(900px 420px at 50% 70%, rgba(138,43,226,.18), transparent 65%);
  animation: float 18s ease-in-out infinite alternate;
}
@keyframes float{from{transform:translateY(-1.5%)}to{transform:translateY(1.5%)}}

.container{max-width:1400px;margin:0 auto;padding:16px}

/* Topbar + filtre */
.topbar{position:sticky; top:16px; z-index:1000; display:flex; align-items:center; gap:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border:1px solid var(--grid); border-radius:16px; padding:10px 12px; backdrop-filter: blur(8px);
  box-shadow:0 12px 40px rgba(0,0,0,.35);
  pointer-events:auto;
}
.topbar h1{margin:0 8px 0 4px; font:700 16px/1 Orbitron, sans-serif; letter-spacing:.06em}
.spacer{flex:1}

.btn{
  appearance:none; cursor:pointer; border:1px solid transparent; border-radius:12px; padding:10px 12px; color:var(--text);
  background:
    linear-gradient(#0c1327,#0b1120) padding-box,
    conic-gradient(from 180deg, rgba(0,234,255,.8), rgba(138,43,226,.8), rgba(0,234,255,.8)) border-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 8px 24px rgba(0,0,0,.45);
  transition: transform .2s ease, filter .2s ease, box-shadow .2s ease; font-weight:600; letter-spacing:.02em;
  pointer-events:auto;
}
.btn:hover{ transform: translateY(-2px); filter: var(--glow); }
.btn:focus-visible{ outline:none; box-shadow: var(--ring); }
.btn[disabled]{opacity:.5; cursor:not-allowed}
.btn.small{padding:6px 10px; border-radius:10px; font-size:12px}

.input, .select{
  height:36px; border:1px solid var(--grid); border-radius:10px; background:rgba(8,12,28,.6); color:var(--text); padding:0 10px; outline:none;
}

.status{color:var(--muted); font-size:12px}

/* Liste verticale */
.list{display:flex; flex-direction:column; gap:8px; margin-top:12px}
.card{
  width:100%;
  border:1px solid var(--grid); border-radius:14px; padding:12px; background: var(--card-bg);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04); transition: transform .15s ease, filter .15s ease, background .2s;
  cursor:pointer;
}
.card:hover{ transform: translateY(-1px); filter: var(--glow); }
.row{display:flex; align-items:center; gap:10px}
.from{color:#fff; font-weight:700; margin-right:auto; min-width:160px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
.subject{font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:60vw}
.labels{display:flex; gap:6px; align-items:center}
.label{font-size:11px; padding:2px 8px; border:1px solid var(--grid); border-radius:999px; opacity:.9}
.unread .subject{font-weight:800}
.snippet{color:var(--muted); margin-top:6px; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical}
.small{font-size:12px; color:var(--muted)}
.actions-inline{display:flex; gap:8px}

/* AUTH LOCK */
.auth-block{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(3,6,16,.65); backdrop-filter:blur(3px); z-index:9999;
}
.auth-card{
  width:min(520px,calc(100vw - 32px)); padding:16px; border-radius:16px;
  border:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
  box-shadow:0 20px 40px rgba(0,0,0,.45); color:var(--text);
}
.auth-card h3{ margin:0 0 8px; font-family:Orbitron,sans-serif; letter-spacing:.06em }
body.auth-locked .auth-block{ display:flex; }
body.auth-locked .container{ pointer-events:none; filter:grayscale(1) opacity(.35) }

/* MODALE LECTURE/REPONSE */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(3,6,16,.55); z-index:2000; backdrop-filter: blur(2px);
}
.modal .card{
  width:min(1100px,calc(100vw - 32px)); max-height:90vh; overflow:auto;
  border:1px solid var(--grid); border-radius:16px; padding:14px; background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  box-shadow:0 20px 40px rgba(0,0,0,.35);
  cursor:default;
}
.viewer{ border:1px solid var(--grid); border-radius:12px; overflow:hidden; min-height:360px; background:#0a0f20; }
.viewer iframe{ width:100%; height:460px; border:0; display:block; }
.meta{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.pill{border:1px solid var(--grid); border-radius:999px; padding:4px 10px; font-size:12px}
.reply{ margin-top:12px; border:1px solid var(--grid); border-radius:12px; padding:10px; background:rgba(255,255,255,.03); }
.toolbar{ display:flex; align-items:center; gap:8px; margin-bottom:8px; flex-wrap:wrap }
.editor{ min-height:140px; padding:10px; border:1px solid var(--grid); border-radius:8px; background:rgba(0,0,0,.25); outline:none; white-space:pre-wrap; }
.modal .actions{display:flex; gap:8px; justify-content:flex-end; margin-top:10px}
.att-list{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px}
.att{display:flex; align-items:center; gap:6px; padding:6px 10px; border:1px dashed var(--grid); border-radius:10px; font-size:12px}
.att .x{cursor:pointer; opacity:.8}
.hint{font-size:12px; opacity:.8}

.pager{display:flex; gap:8px; justify-content:center; margin:16px 0}
@media (prefers-reduced-motion: reduce){ *{animation:none!important; transition:none!important} }
