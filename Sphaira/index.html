<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SPHAIRA</title>

  <!-- Polices futuristes -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- CSS externe -->
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <!-- Menu 1 -->
  <aside id="sidebar" class="sidebar" aria-label="Navigation">
    <div id="principalList"></div>
  </aside>

  <!-- Menu 2 (overlay, uniquement après sélection via Menu 1) -->
  <aside id="actions" class="sidebar sidebar2" aria-label="Actions du cercle">
    <button id="closeMenu2" title="Fermer">×</button>
    <div class="row" aria-label="Titre (panneau)">
      <label for="titleInput2">Titre</label>
      <input id="titleInput2" type="text" placeholder="Nom du cercle" style="flex:1" />
    </div>
    <button id="actAddPrincipal" class="side-item" type="button">➕ Cercle principal</button>
    <button id="actAddSecondary" class="side-item" type="button">➕ Cercle secondaire</button>
    <button id="actWire" class="side-item" type="button">🔗 Connecter à…</button>
    <div class="row" aria-label="Couleur (panneau)">
      <label for="colorPicker2">Couleur</label>
      <input id="colorPicker2" type="color" value="#00EAFF" />
    </div>
    <div class="row" aria-label="Police (panneau)">
      <label for="fontSelect2">Police</label>
      <select id="fontSelect2">
        <option value="system-ui">Système</option>
        <option value="Arial">Arial</option>
        <option value="Roboto">Roboto</option>
        <option value="Georgia">Georgia</option>
        <option value="'Times New Roman'">Times New Roman</option>
        <option value="'Courier New'">Courier New</option>
      </select>
    </div>
    <div class="row" aria-label="Taille max (panneau)">
      <label for="fontSizeMax2">Taille max</label>
      <input id="fontSizeMax2" type="number" min="6" max="72" step="1" value="32" />
    </div>
    <div class="row" aria-label="Style (panneau)">
      <label>Style</label>
      <div class="toggle-group">
        <button type="button" id="boldBtn2" class="toggle" aria-pressed="true">Gras</button>
        <button type="button" id="italicBtn2" class="toggle" aria-pressed="false">Italique</button>
        <button type="button" id="underlineBtn2" class="toggle" aria-pressed="false">Souligné</button>
      </div>
    </div>
    <button id="actCenter" class="side-item" type="button">🎯 Centrer sur le cercle</button>
    <button id="actDelete" class="side-item danger" type="button">🗑️ Supprimer le cercle</button>
  </aside>

  <!-- Zone schéma -->
  <div id="stage" class="stage" aria-label="Espace de travail">
    <div id="world">
      <svg id="wires" aria-hidden="true"></svg>
      <div id="main-node" class="node" data-id="node-0" style="left: calc(50% - 55px); top: calc(50% - 55px); --node:#00EAFF;">
        <span class="label">Cercle principal</span>
      </div>
    </div>
  </div>

  <!-- Menu 3 (générique) -->
  <div id="menu" class="menu" role="menu" aria-hidden="true">
    <div class="menu-body">
      <div class="row" aria-label="Titre (menu 3)">
        <label for="titleInput3">Titre</label>
        <input id="titleInput3" type="text" placeholder="Nom du cercle" style="flex:1" />
      </div>

      <button data-action="add">➕ Cercle principal</button>
      <button data-action="addSmall">➕ Cercle secondaire</button>

      <div class="row" aria-label="URL">
        <button data-action="setUrl" style="flex:1">🔗 Lier une URL…</button>
        <a id="openUrlBtnMenu" class="icon-btn small" title="Ouvrir l’URL" target="_blank" rel="noopener noreferrer">↗</a>
      </div>

      <div class="row" aria-label="Sélecteur de couleur">
        <label for="colorPicker">Couleur</label>
        <input id="colorPicker" type="color" value="#00EAFF" />
      </div>

      <div class="row" aria-label="Police">
        <label for="fontSelect">Police</label>
        <select id="fontSelect">
          <option value="system-ui">Système</option>
          <option value="Arial">Arial</option>
          <option value="Roboto">Roboto</option>
          <option value="Georgia">Georgia</option>
          <option value="'Times New Roman'">Times New Roman</option>
          <option value="'Courier New'">Courier New</option>
        </select>
      </div>
      <div class="row" aria-label="Taille de police">
        <label for="fontSizeMax">Taille max</label>
        <input id="fontSizeMax" type="number" min="6" max="72" step="1" value="32" />
      </div>
      <div class="row" aria-label="Style de texte">
        <label>Style</label>
        <div class="toggle-group">
          <button type="button" id="boldBtn" class="toggle" aria-pressed="true">Gras</button>
          <button type="button" id="italicBtn" class="toggle" aria-pressed="false">Italique</button>
          <button type="button" id="underlineBtn" class="toggle" aria-pressed="false">Souligné</button>
        </div>
      </div>

      <div class="menu-spacer"></div>
      <div class="menu-footer">
        <button id="iconTaskBtn" class="icon-btn star" title="Ajouter/éditer des tâches" aria-label="Ajouter/éditer des tâches">⭐</button>
        <button id="iconWireBtn" class="icon-btn" title="Connecter à…" aria-label="Connecter à…">🔗</button>
        <button id="iconCenterBtn" class="icon-btn" title="Centrer sur le cercle" aria-label="Centrer sur le cercle">🎯</button>
        <button id="iconDeleteBtn" class="icon-btn" title="Supprimer le cercle" aria-label="Supprimer le cercle">🗑️</button>
      </div>
    </div>
  </div>

  <!-- Menu 4 (cœur) -->
  <div id="menuHeart" class="menu" role="menu" aria-hidden="true">
    <div class="menu-body">
      <button data-action="add">➕ Cercle principal</button>
      <button data-action="addSmall">➕ Cercle secondaire</button>
      <button data-action="wire">🔗 Connecter à…</button>
      <div class="row" aria-label="Sélecteur de couleur"><label for="colorPickerH">Couleur</label><input id="colorPickerH" type="color" value="#00EAFF" /></div>
      <div class="row" aria-label="Police"><label for="fontSelectH">Police</label>
        <select id="fontSelectH">
          <option value="system-ui">Système</option><option value="Arial">Arial</option><option value="Roboto">Roboto</option>
          <option value="Georgia">Georgia</option><option value="'Times New Roman'">Times New Roman</option><option value="'Courier New'">Courier New</option>
        </select>
      </div>
      <div class="row" aria-label="Taille de police"><label for="fontSizeMaxH">Taille max</label><input id="fontSizeMaxH" type="number" min="6" max="72" step="1" value="32" /></div>
      <div class="row" aria-label="Style de texte">
        <label>Style</label>
        <div class="toggle-group">
          <button type="button" id="boldBtnH" class="toggle" aria-pressed="true">Gras</button>
          <button type="button" id="italicBtnH" class="toggle" aria-pressed="false">Italique</button>
          <button type="button" id="underlineBtnH" class="toggle" aria-pressed="false">Souligné</button>
        </div>
      </div>
      <button data-action="rename">✏️ Renommer le cercle</button>
      <div class="menu-spacer"></div>
      <div class="menu-footer">
        <button id="iconColorBtnH" class="icon-btn" title="Modifier la couleur" aria-label="Modifier la couleur">🎨</button>
        <button id="iconCenterBtnH" class="icon-btn" title="Centrer sur le cercle" aria-label="Centrer sur le cercle">🎯</button>
        <button id="iconDeleteBtnH" class="icon-btn" title="Supprimer le cercle" aria-label="Supprimer le cercle">🗑️</button>
      </div>
    </div>
  </div>

  <!-- Outils -->
  <div class="toolbar" aria-label="Actions rapides">
    <button id="wireModeBtn" class="secondary">Câbler (C)</button>
    <button id="exportBtn">Exporter JSON</button>
    <button id="importBtn" class="secondary">Importer JSON</button>
    <button id="resetBtn" class="danger">Réinitialiser</button>
    <input id="fileInput" type="file" accept="application/json" style="display:none" />
  </div>

  <!-- Boutons bas-droite -->
  <button id="tasksBtn" class="home-btn" title="Voir toutes les tâches">⭐</button>
  <button id="homeBtn" class="home-btn" title="Recentrer sur le cœur">♥</button>

  <!-- Modal ajout/édition tâche (par cercle) -->
  <div id="taskEditor" class="modal" aria-hidden="true">
    <div class="card">
      <h3>Ajouter / modifier une tâche</h3>
      <div class="row"><label>Titre</label><input id="taskTitle" type="text" placeholder="Titre de la tâche" /></div>
      <div class="row"><label>Note</label><textarea id="taskDesc" rows="4" placeholder="Description ou notes"></textarea></div>
      <div class="row"><label>Début</label><input id="taskStart" type="date" /></div>
      <div class="row"><label>Fin</label><input id="taskEnd" type="date" /></div>

      <h3>Tâches du cercle</h3>
      <div id="nodeTasksList" class="list"></div>

      <div class="actions">
        <button id="taskCancel" class="btn secondary">Annuler</button>
        <button id="taskSave" class="btn">Enregistrer</button>
      </div>
    </div>
  </div>

  <!-- Modal liste tâches (globale) -->
  <div id="tasksModal" class="modal" aria-hidden="true">
    <div class="card">
      <h3>Liste des tâches</h3>
      <div id="tasksContainer" class="list"></div>
      <div class="actions">
        <button id="tasksClose" class="btn">Fermer</button>
      </div>
    </div>
  </div>

  <!-- JS externe -->
  <script defer src="./scripts.js"></script>
</body>
</html>
